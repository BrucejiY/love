# âš ï¸ å…³é”®é—®é¢˜ï¼šåç«¯ç¯å¢ƒå˜é‡æœªé…ç½®

## ğŸ¯ æœ€å¯èƒ½çš„åŸå› 

**åç«¯é¡¹ç›® `love-api` åœ¨ Vercel ä¸Šæ²¡æœ‰é…ç½® `ARK_API_KEY` ç¯å¢ƒå˜é‡ï¼**

è¿™ä¼šå¯¼è‡´ï¼š
- åç«¯æ”¶åˆ°è¯·æ±‚
- å¼€å§‹å¤„ç†å›¾ç‰‡
- å°è¯•è°ƒç”¨è±†åŒ… API
- âŒ å‘ç° API Key æœªé…ç½®ï¼ŒæŠ›å‡ºé”™è¯¯
- å‰ç«¯æ˜¾ç¤º"åˆ†æå¤±è´¥ï¼Œè¯·é‡è¯•"

---

## âœ… ç«‹å³ä¿®å¤æ­¥éª¤

### æ­¥éª¤ 1: æµ‹è¯•å¥åº·æ£€æŸ¥ç«¯ç‚¹

ç­‰å¾… Vercel é‡æ–°éƒ¨ç½²å®Œæˆåï¼ˆçº¦ 2 åˆ†é’Ÿï¼‰ï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€ï¼š

```
https://love-api-sand.vercel.app/api/health
```

**æŸ¥çœ‹è¿”å›ç»“æœï¼š**

å¦‚æœæ˜¾ç¤ºï¼š
```json
{
  "status": "healthy",
  "env": {
    "hasApiKey": false,        â† âš ï¸ å¦‚æœæ˜¯ falseï¼Œé—®é¢˜ç¡®è®¤ï¼
    "apiKeyPrefix": "NOT_SET"  â† âš ï¸ æ˜¾ç¤ºæœªè®¾ç½®
  }
}
```

**è¯´æ˜åç«¯ç¯å¢ƒå˜é‡æœªé…ç½®ï¼Œéœ€è¦æ·»åŠ ï¼**

---

### æ­¥éª¤ 2: é…ç½®åç«¯ç¯å¢ƒå˜é‡

1. è®¿é—® [Vercel Dashboard](https://vercel.com/dashboard)
2. ç‚¹å‡» **`love-api`** é¡¹ç›®ï¼ˆåç«¯ï¼Œä¸æ˜¯ love-r7cqï¼‰
3. ç‚¹å‡» **Settings** â†’ **Environment Variables**
4. æ·»åŠ ä»¥ä¸‹ 3 ä¸ªå˜é‡ï¼š

| Name | Value | Environment |
|------|-------|-------------|
| `ARK_API_KEY` | `342d196d-75d2-4f41-a4ed-4de63b39bd2c` | âœ… Production, âœ… Preview, âœ… Development |
| `ARK_BASE_URL` | `https://ark.cn-beijing.volces.com/api/v3` | âœ… Production, âœ… Preview, âœ… Development |
| `NODE_ENV` | `production` | âœ… Production, âœ… Preview, âœ… Development |

5. ç‚¹å‡» **Save**

---

### æ­¥éª¤ 3: é‡æ–°éƒ¨ç½²åç«¯

é…ç½®ä¿å­˜åï¼š
1. è¿›å…¥ **Deployments** æ ‡ç­¾
2. æ‰¾åˆ°æœ€æ–°çš„éƒ¨ç½²
3. ç‚¹å‡» **"..."** â†’ **Redeploy**
4. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆçº¦ 1-2 åˆ†é’Ÿï¼‰

---

### æ­¥éª¤ 4: å†æ¬¡æµ‹è¯•å¥åº·æ£€æŸ¥

é‡æ–°è®¿é—®ï¼š
```
https://love-api-sand.vercel.app/api/health
```

**é¢„æœŸç»“æœï¼š**
```json
{
  "status": "healthy",
  "env": {
    "hasApiKey": true,           â† âœ… å˜æˆ true
    "apiKeyPrefix": "342d196d...", â† âœ… æ˜¾ç¤º Key å‰ç¼€
    "baseUrl": "https://ark.cn-beijing.volces.com/api/v3"
  }
}
```

---

### æ­¥éª¤ 5: æµ‹è¯•å®Œæ•´æµç¨‹

1. è®¿é—® https://love-r7cq.vercel.app
2. ä¸Šä¼  5 å¼ å›¾ç‰‡
3. å¼€å§‹åˆ†æ
4. **åº”è¯¥èƒ½æˆåŠŸäº†ï¼** ğŸ‰

---

## ğŸ” å¦‚æœè¿˜æ˜¯å¤±è´¥

### æŸ¥çœ‹ Vercel åç«¯æ—¥å¿—

1. è¿›å…¥ **`love-api`** é¡¹ç›®
2. ç‚¹å‡»é¡¶éƒ¨çš„ **Deployments** æ ‡ç­¾
3. ç‚¹å‡»æœ€æ–°çš„éƒ¨ç½²
4. ç‚¹å‡» **View Function Logs**
5. ä¸Šä¼ å›¾ç‰‡è§¦å‘åˆ†æ
6. æŸ¥çœ‹å®æ—¶æ—¥å¿—è¾“å‡º

**æ—¥å¿—ä¸­åº”è¯¥ä¼šæ˜¾ç¤ºï¼š**
```
ğŸ“¸ æ”¶åˆ° 5 å¼ å›¾ç‰‡
ğŸ”‘ æ£€æŸ¥ API Key... { hasKey: true, ... }
ğŸ¤– å¼€å§‹è°ƒç”¨è±†åŒ… AI åˆ†æ...
```

**å¦‚æœæœ‰é”™è¯¯ï¼Œæ—¥å¿—ä¼šæ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ã€‚**

---

## ğŸ“¸ é…ç½®æˆªå›¾ç¤ºä¾‹

### Environment Variables åº”è¯¥åŒ…å«ï¼š

```
Name             Value                                         Environment
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ARK_API_KEY     342d196d-75d2-4f41-a4ed-4de63b39bd2c          Production, Preview, Development
ARK_BASE_URL    https://ark.cn-beijing.volces.com/api/v3      Production, Preview, Development
NODE_ENV        production                                     Production, Preview, Development
```

---

## ğŸ’¡ ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Ÿ

å½“æˆ‘ä»¬éƒ¨ç½²åˆ° Vercel æ—¶ï¼š
- âœ… **å‰ç«¯**ï¼šä»£ç ä¸­ç¡¬ç¼–ç äº†åç«¯ URLï¼Œæ‰€ä»¥èƒ½æ­£å¸¸è®¿é—®åç«¯
- âŒ **åç«¯**ï¼šæœ¬åœ° `.env` æ–‡ä»¶ä¸ä¼šä¸Šä¼ åˆ° Vercelï¼Œéœ€è¦åœ¨ Vercel æ§åˆ¶å°æ‰‹åŠ¨é…ç½®

è¿™æ˜¯å…¸å‹çš„**ç¯å¢ƒå˜é‡é…ç½®é—æ¼**é—®é¢˜ã€‚

---

**ç°åœ¨è¯·æŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ“ä½œï¼Œç‰¹åˆ«æ˜¯æ­¥éª¤ 1 çš„å¥åº·æ£€æŸ¥ï¼**

