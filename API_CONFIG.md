# è±†åŒ… API é…ç½®æŒ‡å—

## ğŸ“ è·å– API Key

### æ­¥éª¤ 1: æ³¨å†Œç«å±±å¼•æ“è´¦å·

1. è®¿é—® [ç«å±±å¼•æ“å®˜ç½‘](https://www.volcengine.com/)
2. ç‚¹å‡»å³ä¸Šè§’"ç™»å½•/æ³¨å†Œ"
3. å®Œæˆè´¦å·æ³¨å†Œå’Œå®åè®¤è¯

### æ­¥éª¤ 2: è¿›å…¥ ARK æ§åˆ¶å°

1. ç™»å½•åè®¿é—® [ARK æ§åˆ¶å°](https://console.volcengine.com/ark)
2. å¦‚æœæ˜¯é¦–æ¬¡ä½¿ç”¨ï¼Œéœ€è¦å¼€é€šæœåŠ¡ï¼ˆé€šå¸¸æœ‰å…è´¹è¯•ç”¨é¢åº¦ï¼‰

### æ­¥éª¤ 3: åˆ›å»º API Key

1. åœ¨å·¦ä¾§èœå•æ‰¾åˆ° "API Key ç®¡ç†"
2. ç‚¹å‡»"åˆ›å»º API Key"
3. ç»™ Key èµ·ä¸ªåå­—ï¼Œæ¯”å¦‚ "æœ‹å‹åœˆåŠ©æ‰‹"
4. å¤åˆ¶ç”Ÿæˆçš„ API Keyï¼ˆæ ¼å¼ç±»ä¼¼ï¼š`342d196d-75d2-4f41-a4ed-4de63b39bd2c`ï¼‰

âš ï¸ **é‡è¦**ï¼šAPI Key åªæ˜¾ç¤ºä¸€æ¬¡ï¼Œè¯·ç«‹å³ä¿å­˜åˆ°å®‰å…¨çš„åœ°æ–¹ï¼

### æ­¥éª¤ 4: ç¡®è®¤æ¨¡å‹æƒé™

ç¡®ä¿ä½ çš„è´¦å·æœ‰ä»¥ä¸‹æ¨¡å‹çš„è®¿é—®æƒé™ï¼š
- `doubao-seed-1-6-thinking-250715`

å¦‚æœæ²¡æœ‰ï¼Œéœ€è¦åœ¨æ§åˆ¶å°ç”³è¯·å¼€é€šã€‚

---

## âš™ï¸ é…ç½®åˆ°é¡¹ç›®

### æ–¹æ³• 1: åˆ›å»º .env æ–‡ä»¶ï¼ˆæ¨èï¼‰

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# åˆ›å»º .env æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘æ–‡ä»¶
nano .env
```

åœ¨ `.env` æ–‡ä»¶ä¸­å¡«å…¥ä½ çš„ API Keyï¼š

```env
ARK_API_KEY=ä½ çš„å®é™…API_Key
ARK_BASE_URL=https://ark.cn-beijing.volces.com/api/v3
PORT=3001
NODE_ENV=development
UPLOAD_DIR=./uploads
```

ä¿å­˜å¹¶é€€å‡ºï¼ˆCtrl+O, Enter, Ctrl+Xï¼‰

### æ–¹æ³• 2: ç¯å¢ƒå˜é‡è®¾ç½®

**macOS / Linux:**

```bash
export ARK_API_KEY="ä½ çš„API_Key"
```

**Windows (PowerShell):**

```powershell
$env:ARK_API_KEY="ä½ çš„API_Key"
```

---

## ğŸ§ª æµ‹è¯• API Key

åˆ›å»ºæµ‹è¯•è„šæœ¬ `test-api.js`ï¼š

```javascript
import axios from 'axios'

const ARK_API_KEY = 'ä½ çš„API_Key'
const ARK_BASE_URL = 'https://ark.cn-beijing.volces.com/api/v3'

async function testAPI() {
  try {
    const response = await axios.post(
      `${ARK_BASE_URL}/responses`,
      {
        model: 'doubao-seed-1-6-thinking-250715',
        input: [
          {
            role: 'user',
            content: [
              {
                type: 'input_text',
                text: 'ä½ å¥½ï¼Œè¯·ç®€å•ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±ã€‚'
              }
            ]
          }
        ]
      },
      {
        headers: {
          'Authorization': `Bearer ${ARK_API_KEY}`,
          'Content-Type': 'application/json'
        }
      }
    )
    
    console.log('âœ… API Key é…ç½®æˆåŠŸï¼')
    console.log('å“åº”:', response.data)
  } catch (error) {
    console.error('âŒ API Key é…ç½®å¤±è´¥:', error.response?.data || error.message)
  }
}

testAPI()
```

è¿è¡Œæµ‹è¯•ï¼š

```bash
node test-api.js
```

---

## ğŸ“Š API è°ƒç”¨æ ¼å¼

### è¯·æ±‚æ ¼å¼

```javascript
POST https://ark.cn-beijing.volces.com/api/v3/responses

Headers:
  Authorization: Bearer YOUR_API_KEY
  Content-Type: application/json

Body:
{
  "model": "doubao-seed-1-6-thinking-250715",
  "input": [
    {
      "role": "user",
      "content": [
        {
          "type": "input_text",
          "text": "ä½ çš„é—®é¢˜"
        },
        {
          "type": "input_image",
          "image_url": "https://example.com/image.jpg"
          // æˆ–è€… base64: "data:image/jpeg;base64,..."
        }
      ]
    }
  ]
}
```

### å“åº”æ ¼å¼

```javascript
{
  "output": "AI çš„å›å¤å†…å®¹",
  "usage": {
    "input_tokens": 100,
    "output_tokens": 200
  }
}
```

---

## ğŸ’° è´¹ç”¨è¯´æ˜

### è®¡è´¹æ–¹å¼

è±†åŒ… API æŒ‰ç…§ token æ•°é‡è®¡è´¹ï¼š

- **è¾“å…¥ tokens**ï¼šçº¦ Â¥0.01/åƒ tokens
- **è¾“å‡º tokens**ï¼šçº¦ Â¥0.02/åƒ tokens

### æˆæœ¬ä¼°ç®—

å•æ¬¡åˆ†æï¼ˆ5å¼ å›¾ç‰‡ï¼‰ï¼š
- è¾“å…¥ï¼šçº¦ 5,000 tokensï¼ˆprompt + å›¾ç‰‡ï¼‰
- è¾“å‡ºï¼šçº¦ 2,000 tokensï¼ˆåˆ†æç»“æœï¼‰
- **é¢„ä¼°è´¹ç”¨ï¼šÂ¥0.1 - Â¥0.3**

### å…è´¹é¢åº¦

æ–°ç”¨æˆ·é€šå¸¸æœ‰å…è´¹è¯•ç”¨é¢åº¦ï¼š
- å¯èƒ½æ˜¯æ—¶é—´é™åˆ¶ï¼ˆå¦‚ 30 å¤©ï¼‰
- æˆ–è€… token æ•°é‡é™åˆ¶ï¼ˆå¦‚ 100ä¸‡ tokensï¼‰

å…·ä½“ä»¥ç«å±±å¼•æ“å®˜ç½‘æœ€æ–°æ”¿ç­–ä¸ºå‡†ã€‚

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: API Key æ— æ•ˆï¼Ÿ

**å¯èƒ½åŸå› **ï¼š
1. API Key å¤åˆ¶ä¸å®Œæ•´ï¼ˆæœ‰ç©ºæ ¼æˆ–æ¢è¡Œï¼‰
2. API Key å·²è¿‡æœŸæˆ–è¢«åˆ é™¤
3. è´¦å·æ¬ è´¹

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. é‡æ–°å¤åˆ¶ API Keyï¼Œç¡®ä¿å®Œæ•´
2. åœ¨æ§åˆ¶å°æ£€æŸ¥ Key çŠ¶æ€
3. æ£€æŸ¥è´¦æˆ·ä½™é¢

### Q2: æç¤º "æ¨¡å‹ä¸å¯ç”¨"ï¼Ÿ

**å¯èƒ½åŸå› **ï¼š
1. è´¦å·æ²¡æœ‰è¯¥æ¨¡å‹æƒé™
2. æ¨¡å‹åç§°é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åœ¨æ§åˆ¶å°ç”³è¯·æ¨¡å‹æƒé™
2. ç¡®è®¤æ¨¡å‹åç§°ï¼š`doubao-seed-1-6-thinking-250715`

### Q3: è¯·æ±‚è¶…æ—¶ï¼Ÿ

**å¯èƒ½åŸå› **ï¼š
1. ç½‘ç»œé—®é¢˜
2. å›¾ç‰‡è¿‡å¤§
3. æœåŠ¡å™¨è´Ÿè½½é«˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. å‹ç¼©å›¾ç‰‡ï¼ˆå‰ç«¯å·²è‡ªåŠ¨å‹ç¼©ï¼‰
3. å¢åŠ è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤ 120 ç§’ï¼‰

### Q4: è´¹ç”¨æ¶ˆè€—å¤ªå¿«ï¼Ÿ

**ä¼˜åŒ–å»ºè®®**ï¼š
1. å‡å°‘ system prompt é•¿åº¦
2. ä¼˜åŒ–å›¾ç‰‡å¤§å°å’Œæ•°é‡
3. æ·»åŠ ç»“æœç¼“å­˜
4. è®¾ç½®æ¯æ—¥è°ƒç”¨é™é¢

---

## ğŸ”’ å®‰å…¨æœ€ä½³å®è·µ

### âœ… åº”è¯¥åšçš„

1. **ä½¿ç”¨ç¯å¢ƒå˜é‡**å­˜å‚¨ API Key
2. **æ·»åŠ åˆ° .gitignore**ï¼Œé˜²æ­¢æäº¤åˆ°ä»£ç ä»“åº“
3. **å®šæœŸè½®æ¢** API Key
4. **è®¾ç½®è°ƒç”¨é™é¢**ï¼Œé˜²æ­¢æ»¥ç”¨
5. **ç›‘æ§ä½¿ç”¨æƒ…å†µ**ï¼ŒåŠæ—¶å‘ç°å¼‚å¸¸

### âŒ ä¸åº”è¯¥åšçš„

1. âŒ å°† API Key ç¡¬ç¼–ç åœ¨ä»£ç ä¸­
2. âŒ å°† API Key æäº¤åˆ° GitHub
3. âŒ åœ¨å‰ç«¯ä»£ç ä¸­ä½¿ç”¨ API Key
4. âŒ å…±äº« API Key ç»™ä»–äºº
5. âŒ åœ¨æ—¥å¿—ä¸­æ‰“å° API Key

---

## ğŸ“ è·å–å¸®åŠ©

### å®˜æ–¹æ–‡æ¡£

- [è±†åŒ…å¤§æ¨¡å‹æ–‡æ¡£](https://www.volcengine.com/docs/82379/1399008)
- [ARK API æ–‡æ¡£](https://www.volcengine.com/docs/82379/1298454)
- [ç«å±±å¼•æ“æ§åˆ¶å°](https://console.volcengine.com/ark)

### è”ç³»æ”¯æŒ

- ç«å±±å¼•æ“å·¥å•ç³»ç»Ÿ
- å®˜æ–¹æŠ€æœ¯æ”¯æŒç¾¤

---

## ğŸ¯ å¿«é€Ÿæ£€æŸ¥æ¸…å•

é…ç½®å®Œæˆåï¼Œæ£€æŸ¥ä»¥ä¸‹é¡¹ç›®ï¼š

- [ ] âœ… å·²è·å– API Key
- [ ] âœ… å·²é…ç½®åˆ° .env æ–‡ä»¶
- [ ] âœ… .env å·²æ·»åŠ åˆ° .gitignore
- [ ] âœ… æµ‹è¯• API è°ƒç”¨æˆåŠŸ
- [ ] âœ… è´¦æˆ·æœ‰è¶³å¤Ÿä½™é¢/é¢åº¦
- [ ] âœ… æ¨¡å‹æƒé™å·²å¼€é€š

å…¨éƒ¨ âœ… åå³å¯å¼€å§‹ä½¿ç”¨ï¼

---

**æ›´æ–°æ—¥æœŸ**ï¼š2025-12-10  
**é€‚ç”¨ç‰ˆæœ¬**ï¼šv1.0

